---
import s from "../../assets/images/scale.jpg"
import { Button } from "../ui/button"
---

<div class="cta flex items-center h-dvh w-dvw justify-center bg-white">
  <div class="inner w-full h-full flex flex-col items-center justify-center relative">
    <div
      class="left overflow-hidden flex items-center justify-center gap-7 w-full"
    >
      <h1
        class="capitalize text-nowrap break-keep font-medium text-[170px] text-black"
      >
        Modern problems
      </h1>
      <h1
        class="capitalize text-nowrap break-keep font-medium text-[170px] text-black"
      >
        engineered answers.
      </h1>
    </div>
    <div
      class="right overflow-hidden flex items-center justify-start gap-7 w-full"
    >
      <h1
        class="capitalize text-nowrap break-keep font-medium text-[170px] text-black"
      >
        Seamless experiences
      </h1>
      <h1
        class="capitalize text-nowrap break-keep font-medium text-[170px] text-black"
      >
        From idea to execution.
      </h1>
    </div>
    <div class="flex items-center justify-center absolute top-0 left-0 w-full h-full">
        <div class="box grow-container bg-top bg-cover bg-no-repeat flex opacity-0 items-center justify-center w-1/3 h-1/2">
            <div class="box-inner flex flex-col items-center w-full gap-[30px] h-full justify-center bg-black/35">
                <h2 class="text-white text-5xl font-bold capitalize">Ready to Transform Your Business?</h2>
                <p class="text-white text-3xl">Let's discuss how our technical expertise can help you achieve your business goals.</p>
                <div class="button-wrapper">
                    <Button variant='outline' size="lg" className="rounded-full w-full">Let's talk</Button>
                </div>
            </div>
        </div>
    </div>
  </div>
</div>
<script>
  import { gsap, ScrollTrigger } from "@/utils/gsap";
  let box = document.querySelector<HTMLElement>(".cta .box"),
    trigger = document.querySelector(".cta");
  //text timeline
  const textTl = () => {
    let ttl = gsap.timeline();
    ttl
      .to(".cta .left", {
        xPercent: 50,
        duration: 1.5,
      })
      .to(
        ".cta .right",
        {
          xPercent: -50,
          duration: 1.5,
        },
        "<"
      );
    return ttl;
  };

  //video container timeline
  let videoTl = () => {
    let vtl = gsap.timeline();
    vtl
      .set(box, {
        opacity: 1,
      })
      .from(box, {
        yPercent: 100,
      })
      .to(
        box,
        {
          width: "100dvw",
          height: "100dvh",
          duration: 1.2,
          willChange:'height, width, transform'
        },
        "-=0.3"
      )
      .from('.box-inner', {
        opacity: 0
      })

    return vtl;
  };

  //global timeline
  let globalT = gsap.timeline({
    scrollTrigger: {
      trigger,
      start: "top top",
      end: "+=7000",
      pin: true,
      scrub: 1,
      pinSpacing: true
    },
  });

  globalT.add(textTl()).add(videoTl(), "<");
</script>
